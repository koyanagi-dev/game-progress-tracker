# Game Progress Tracker 要件定義書 v0.4

## 0. ドキュメント情報

- ドキュメント名：Game Progress Tracker 要件定義書
- バージョン：v0.4
- 更新日：2025-11-24
- 対象アプリ：Game Progress Tracker（ゲーム進行管理アプリ）
- 想定読者：
  - 開発者（自分自身）
  - 将来の共同開発者
  - テスター

### 0.1 変更履歴

- v0.1：初版（タスク管理の基本機能）
- v0.2：入力バリデーション、セキュリティ要件の明確化
- v0.3：カテゴリ機能（カテゴリ選択／絞り込み）、メモ欄（タスク詳細説明）追加
- **v0.4：メモ編集仕様の明確化、削除取り消し（Undo）機能追加、Kano分類の見直し・整理**

---

## 1. アプリ概要

### 1.1 コンセプト

Game Progress Tracker は、コンシューマゲーム（家庭用ゲーム機・PCゲームなど）の進行管理に特化した **シングルユーザー向け TODO アプリ** である。

- 「クリアしたいゲームが多すぎて何をやっていたか忘れる」
- 「どのボスまで倒したか、素材集めがどこまで終わったか管理したい」

といったニーズに応えることを目的とする。

### 1.2 目的

- ゲームごとのタスクを記録し、状態（未着手／進行中／完了／保留）を把握できるようにする
- メインクエスト・サブクエスト・素材集めなどの **カテゴリ** で整理しやすくする
- 攻略メモや注意点を **メモ欄** に残しておき、後から見返せるようにする
- ブラウザを閉じても、タスクやメモが **localStorage で永続化** される

---

## 2. 用語定義

- **タスク**  
  ゲーム内で行いたい具体的な作業単位。例：「ボスAを倒す」「武器Xを+10に強化する」。

- **状態（ステータス）**  
  タスクの進行状況。以下の4つをローテーションする。
  - 未着手
  - 進行中
  - 完了
  - 保留

- **カテゴリ**  
  タスクの種類を表す区分。例：メインクエスト、サブクエスト、素材集め 等。

- **メモ**  
  タスクに紐づく任意の詳細説明・攻略メモ・注意点など。

- **Undo（削除取り消し）**  
  直前に削除したタスクを 1 回だけ元に戻す機能。

- **localStorage**  
  ブラウザのローカルストレージ機能。本アプリではタスク一覧（状態・カテゴリ・メモを含む）を JSON 形式で保存する。

---

## 3. ターゲットユーザーと利用シーン

### 3.1 ターゲットユーザー

- 複数のゲームを並行して遊ぶゲーマー
- 高難度ゲーム（死にゲー、RPG、ハクスラなど）の攻略を計画的に進めたい人
- 「積みゲー」を減らしたい人

### 3.2 想定利用シーン

- 週末に「今週やるゲームタスク」を整理するとき
- 攻略サイトや動画を見ながら、自分用のメモを残したいとき
- 一度離れたゲームに戻るときに、「どこまで進んでいたか」を思い出したいとき

---

## 4. 画面構成（概要）

### 4.1 画面構成の全体像（単一画面）

1. **タスク入力エリア**
   - タスク名入力テキストボックス
   - カテゴリ選択プルダウン
   - メモ入力テキストエリア（任意）
   - 「追加」ボタン

2. **並べ替えボタンエリア**
   - 「状態の昇順（未着手 → 保留）」
   - 「状態の降順（保留 → 未着手）」
   - 「並べ替え解除」

3. **Undo（削除取り消し）エリア**
   - 「削除を取り消す」ボタン（初期状態は無効）
   - 「直前に削除したタスク：『◯◯』」の表示（削除履歴がある場合のみ）

4. **カテゴリ絞り込みエリア**
   - 「カテゴリ絞り込み：」ラベル
   - 絞り込みプルダウン（すべて／メインクエスト／サブクエスト…）

5. **タスク一覧エリア**
   - タスクカード（1タスク = 1カード）
   - 各カードには以下を表示：
     - 状態アイコン＋タスク名＋状態
     - カテゴリラベル
     - メモ（存在する場合）
     - 進捗バー（状態に応じたビジュアル）
     - ボタン：✏️ 編集／🔄 状態変更／❌ 削除
     - 編集モードの場合：タスク名入力、メモ入力、💾 保存、↩️ キャンセル

---

## 5. 機能要件（Kano分類付き）

### 5.1 タスク管理の基本機能

#### F-01 タスク追加（タスク名＋カテゴリ＋メモ）

- 内容：
  - 入力エリアで以下を設定し、「追加」ボタンで新規タスクを作成する。
    - タスク名（必須、最大100文字）
    - カテゴリ（必須、プルダウンから選択）
    - メモ（任意）
- 詳細仕様：
  - タスク名は前後の空白をトリムし、空文字列になった場合はタスクを追加しない。
  - 100文字を超える場合は、先頭100文字に切り詰めて保存する。
  - 新しく追加されたタスクは、一覧の末尾（追加順の最後）に表示される。
- Kano分類：**Must-be（当たり前品質）**

#### F-02 タスク一覧表示

- 内容：
  - 登録済みのタスクを、カード形式で一覧表示する。
- 詳細仕様：
  - 各タスクカードには以下を表示する。
    - 状態アイコン＋タスク名＋状態（未着手／進行中／完了／保留）
    - カテゴリラベル（例：🏷 メインクエスト）
    - メモ（存在する場合）
    - 進捗バー（状態に応じて幅が変化）
    - 操作用のボタン群（✏️ 編集／🔄 状態変更／❌ 削除）
- Kano分類：**Must-be**

#### F-03 タスク編集（タスク名）

- 内容：
  - タスクカードの「✏️ 編集」ボタンを押すと編集モードになり、タスク名を変更できる。
- 詳細仕様：
  - 編集モードではタスク名が入力欄として表示される。
  - 保存時、トリム後の文字列が空文字の場合：
    - 保存操作は無視し、元のタスク名を維持する。
  - 100文字を超える場合は、先頭100文字に切り詰めて保存する。
- Kano分類：**Must-be**

#### F-04 タスク削除

- 内容：
  - タスクカードの「❌ 削除」ボタンを押すと、対象タスクを一覧から削除する。
- 詳細仕様：
  - 削除したタスクはタスク一覧からただちに消える。
  - 直前に削除したタスクは F-13（Undo）の対象として保存される。
- Kano分類：**Must-be**

#### F-05 状態変更（ローテーション）

- 内容：
  - タスクカードの「🔄 状態変更」ボタンを押すたびに、状態をローテーションさせる。
- 詳細仕様：
  - ローテーション順序：  
    **未着手 → 進行中 → 完了 → 保留 → 未着手 → …**
  - 状態に応じて進捗バーの見た目を変える（例：未着手=0%、進行中=50%、完了=100%、保留=0%・別色）。
- Kano分類：**Must-be（タスク管理アプリとしてコアの挙動）**

#### F-06 並べ替え（ソート）：昇順／降順／解除

- 内容：
  - 画面上部のボタンで、タスクを状態順に並べ替える。
- 詳細仕様：
  - 「状態の昇順（未着手 → 保留）」ボタン：
    - 状態の論理順序（未着手 < 進行中 < 完了 < 保留）で並べ替える。
  - 「状態の降順（保留 → 未着手）」ボタン：
    - 昇順の逆順で並べ替える。
  - 「並べ替え解除」ボタン：
    - 並べ替えを解除し、「追加順（最初に追加したタスクが一番上）」に戻す。
  - **昇順・降順が有効な間に状態変更を行っても、タスクの並び順は変わらない。**
    - 並び順の更新は、「昇順／降順／並べ替え解除」ボタンを押したタイミングでのみ行う。
- Kano分類：**One-dimensional（一元品質：あるほど便利で満足度が上がる）**

#### F-07 カテゴリ選択（タスク作成時）

- 内容：
  - タスク追加時にカテゴリを指定できる。
- 詳細仕様：
  - 初期カテゴリ候補：
    - メインクエスト
    - サブクエスト
    - 装備・アイテム収集
    - レベル上げ・育成
    - 素材集め
    - ボス攻略
    - その他
  - カテゴリは必須入力（プルダウンから必ず 1 つ選ばれている状態にする）。
  - カード上にカテゴリラベルが表示される（例：🏷 メインクエスト）。
- Kano分類：**One-dimensional**

#### F-08 カテゴリ絞り込み

- 内容：
  - 画面の「カテゴリ絞り込み」プルダウンで、表示対象のカテゴリを絞り込む。
- 詳細仕様：
  - 値の候補：
    - すべて（ALL）
    - メインクエスト
    - サブクエスト
    - 装備・アイテム収集
    - レベル上げ・育成
    - 素材集め
    - ボス攻略
    - その他
  - 「すべて」の場合は全タスクを表示。
  - それ以外の場合は、選択されたカテゴリと一致するタスクのみ表示。
  - 絞り込みは画面内でのみ有効であり、localStorage の保存内容は全タスク（フィルター前）とする。
- Kano分類：**One-dimensional**

#### F-09 メモ登録・表示（タスク詳細説明）

- 内容：
  - タスクごとに任意のメモを登録でき、タスクカード上に表示される。
- 詳細仕様：
  - メモはタスク追加時に入力エリアから設定できる（空でも可）。
  - メモが存在する場合、タスクカード内の本文エリアに表示する。
  - メモの文字数制限は当面設けない（※将来的に制限を検討）。
- Kano分類：**One-dimensional（あるほど使い勝手が大きく向上する）**

#### F-10 メモ編集

- 内容：
  - タスクカードの「✏️ 編集」ボタンで編集モードにした際、メモも変更できる。
- 詳細仕様：
  - 編集モードでは以下を入力可能：
    - タスク名
    - メモ
  - メモは空文字でも保存可能（メモを消したいケースを許容）。
  - 保存後、タスクカード上のメモ表示が即座に更新される。
- Kano分類：**One-dimensional**

---

### 5.2 信頼性・安全性関連機能

#### F-11 入力バリデーション（空文字・最大長）

- 内容：
  - タスク名に対する入力チェック。
- 詳細仕様：
  - 空文字・空白のみの入力は「追加」「保存」ともに無視する。
  - 101文字以上の入力は、先頭100文字に切り詰めて保存する。
  - バリデーションエラーの場合もエラー表示はせず、「何も起きない」挙動とする（シンプルさ優先）。
- Kano分類：**Must-be**

#### F-12 localStorage 永続化（タスク＋メモ＋カテゴリ＋状態）

- 内容：
  - ブラウザ再読み込み後も、直前のタスク状態を復元する。
- 詳細仕様：
  - localStorage キー名：`game-progress-tracker-tasks`
  - 保存対象：
    - タスクID
    - タスク名
    - 状態
    - カテゴリ
    - メモ
  - タスク一覧が更新されるたびに、localStorage を上書き保存する。
  - 初回ロード時：
    - localStorage に保存済みタスクがあればそれを復元して初期表示とする。
    - 不正な JSON などで復元に失敗した場合は、空のタスク一覧から開始する。
  - Undo 用の削除履歴は **localStorage には保存しない**（F-13 を参照）。
- Kano分類：**Must-be（本アプリの前提となる基本品質）**

#### F-13 削除取り消し（Undo）

- 内容：
  - 直前に削除したタスクを 1 回だけ元に戻せる。
- 詳細仕様：
  - 画面下部付近に「削除を取り消す」ボタンを配置。
  - 初期状態ではボタンは `disabled`：
    - 削除履歴がない場合：押せない＋グレー表示。
  - タスク削除時：
    - 直前に削除したタスクを「削除履歴」として保持。
    - 「削除を取り消す」ボタンを有効化。
    - 「直前に削除したタスク：『◯◯』」とテキスト表示する。
  - 「削除を取り消す」ボタン押下時：
    - 削除履歴のタスクを一覧に復元する。
    - 削除履歴をクリアし、「削除を取り消す」ボタンを再び無効化。
    - 「直前に削除したタスク：〜」の表示も消す。
  - 制約：
    - **1ステップのみ**（多段 Undo は行わない）。
    - ブラウザの再読み込みを行うと削除履歴は消え、Undo はできなくなる。
- Kano分類：**One-dimensional（あると安心感が大きく高まり、満足度が向上する）**

---

## 6. 非機能要件

### 6.1 対応環境

- 対象ブラウザ：
  - Google Chrome 最新版（PC）
- 対象 OS：
  - 開発・主テスト環境：macOS（開発者のローカル環境）
- 将来対応：
  - 他ブラウザ・スマホ向け表示は将来の拡張とする。

### 6.2 パフォーマンス

- タスク数が 100 件程度までは、目に見える遅延なく操作できること。
- 状態変更・編集・削除・Undo 操作は、人間の感覚でストレスを感じない程度（目安：体感 0.2〜0.3 秒程度）で反映されること。

### 6.3 セキュリティ要件

- 本アプリはバックエンドを持たず、localStorage のみを使用するクライアントサイドアプリとする。
- セキュリティ上の最低限の配慮：
  - ユーザー入力は HTML として解釈せず、**画面表示はすべてテキストとして扱う**（XSS 対策として innerHTML を使用しない）。
  - localStorage には機密情報（パスワード、トークンなど）は保存しない。
  - 保存するのはタスク名・状態・カテゴリ・メモのみとする。
- 外部サーバーとの通信は行わない（通信経路での漏洩リスクなし）。

### 6.4 ユーザビリティ・アクセシビリティ

- ボタンや入力欄には、意味のわかるラベルやアイコンを付与する。
- 主要操作（追加・状態変更・削除・Undo）は、一覧を見れば直感的に理解できる UI にする。
- キーボード操作のみでも基本的な操作ができることが望ましい（将来的な改善対象）。

---

## 7. スコープ外（今回のバージョンでは対応しないもの）

- マルチユーザー対応（ログイン機能、複数ユーザーのデータ管理）
- クラウド同期（PCとスマホ間でのデータ共有）
- 期限日時（締切）管理、リマインダー通知
- ソート条件のカスタマイズ（任意キーによる並べ替え）
- カテゴリのユーザー定義・編集
- 多段階 Undo / 履歴管理

---

## 8. Kano モデル分類一覧（機能別）

| 要件ID | 機能名                                      | Kano分類       | コメント                                   |
|--------|---------------------------------------------|----------------|--------------------------------------------|
| F-01   | タスク追加                                  | Must-be        | 無いとアプリとして成立しない               |
| F-02   | タスク一覧表示                              | Must-be        | 登録内容を確認できないと致命的             |
| F-03   | タスク編集（名前）                          | Must-be        | 誤入力を修正できないのはストレスが大きい   |
| F-04   | タスク削除                                  | Must-be        | 要らないタスクを消せないのは不自然         |
| F-05   | 状態変更（ローテーション）                  | Must-be        | 進行管理アプリの中核                       |
| F-06   | 並べ替え（昇順／降順／解除）                | One-dimensional| あるほど使いやすさが直線的に向上           |
| F-07   | カテゴリ選択（作成時）                      | One-dimensional| 分類できることで整理しやすさが向上         |
| F-08   | カテゴリ絞り込み                            | One-dimensional| タスクが増えるほど恩恵が大きい             |
| F-09   | メモ登録・表示                              | One-dimensional| 攻略メモの需要が高く、満足度に直結         |
| F-10   | メモ編集                                    | One-dimensional| メモを更新・削除できないと逆にストレス     |
| F-11   | 入力バリデーション（空文字・最大長）        | Must-be        | 不正なデータを防ぎ、アプリの信頼性を担保   |
| F-12   | localStorage 永続化                         | Must-be        | 「閉じたら消える」はこのアプリでは致命的   |
| F-13   | 削除取り消し（Undo）                        | One-dimensional| 誤削除の不安を減らし、満足度を向上させる   |

---

## 9. 今後の拡張候補（参考）

- カテゴリをユーザーが自由に定義できる機能
- ゲームごとのプロファイル（ゲーム A 用タスク一覧、ゲーム B 用タスク一覧）
- タグ検索／フリーワード検索
- 完了タスクのアーカイブ機能
- 期限・優先度などの属性追加
